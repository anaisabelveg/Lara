

-- Generated by Relational Schema Center on Wed Jan 25 16:46:44 CET 2006 for Cloudscape V5.1


CREATE SCHEMA BIBLIOTECA;

CREATE TABLE BIBLIOTECA.COPIA
  (ID_ELEMENTO INTEGER NOT NULL,
   NUM_COPIA INTEGER NOT NULL,
   PRESTABLE CHAR(1) NOT NULL);

ALTER TABLE BIBLIOTECA.COPIA
  ADD CONSTRAINT "38c30028-0108-f6fd-e2be-000000156310" PRIMARY KEY (ID_ELEMENTO, NUM_COPIA);

CREATE TABLE BIBLIOTECA.ELEMENTO
  (ID_ELEMENTO INTEGER NOT NULL,
   TIPO CHAR(1) NOT NULL,
   ISBN VARCHAR(30) DEFAULT NULL,
   TITULO VARCHAR(50) NOT NULL,
   AUTOR VARCHAR(50) NOT NULL,
   LIMITE CHAR(1) NOT NULL,
   VOLUMENES INTEGER DEFAULT NULL,
   FECHA_PUBLI DATE DEFAULT NULL);

ALTER TABLE BIBLIOTECA.ELEMENTO
  ADD CONSTRAINT "80840021-0108-f6fd-e2be-000000156310" PRIMARY KEY (ID_ELEMENTO);

CREATE TABLE BIBLIOTECA.ENPRESTAMO
  (ID_USUARIO INTEGER NOT NULL,
   ID_ELEMENTO INTEGER NOT NULL,
   NUM_COPIA INTEGER NOT NULL,
   NUM_PRESTAMOS INTEGER NOT NULL,
   FECHA_ENTREGA DATE NOT NULL);

ALTER TABLE BIBLIOTECA.ENPRESTAMO
  ADD CONSTRAINT "09324032-0108-f6fd-e2be-000000156310" PRIMARY KEY (ID_ELEMENTO, NUM_COPIA);

CREATE TABLE BIBLIOTECA.MAXTABLA
  (ID_TABLA INTEGER NOT NULL,
   ID_CLAVE INTEGER NOT NULL,
   MAXIMO INTEGER NOT NULL);

ALTER TABLE BIBLIOTECA.MAXTABLA
  ADD CONSTRAINT "29d8c03e-0108-f6fd-e2be-000000156310" PRIMARY KEY (ID_TABLA, ID_CLAVE);

CREATE TABLE BIBLIOTECA.USUARIO
  (ID_USUARIO INTEGER NOT NULL,
   NOMBRE VARCHAR(50) NOT NULL,
   APELLIDOS VARCHAR(50) NOT NULL,
   PASSWORD VARCHAR(30) NOT NULL,
   EMAIL VARCHAR(255) NOT NULL);

ALTER TABLE BIBLIOTECA.USUARIO
  ADD CONSTRAINT "004b0019-0108-f6fd-e2be-000000156310" PRIMARY KEY (ID_USUARIO);

ALTER TABLE BIBLIOTECA.COPIA
  ADD CONSTRAINT "00cd0029-0108-f6fd-e2be-000000156310" FOREIGN KEY (ID_ELEMENTO)
  REFERENCES BIBLIOTECA.ELEMENTO(ID_ELEMENTO)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE BIBLIOTECA.ENPRESTAMO
  ADD CONSTRAINT "594b8034-0108-f6fd-e2be-000000156310" FOREIGN KEY (ID_ELEMENTO, NUM_COPIA)
  REFERENCES BIBLIOTECA.COPIA(ID_ELEMENTO, NUM_COPIA)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

ALTER TABLE BIBLIOTECA.ENPRESTAMO
  ADD CONSTRAINT "a13ec033-0108-f6fd-e2be-000000156310" FOREIGN KEY (ID_USUARIO)
  REFERENCES BIBLIOTECA.USUARIO(ID_USUARIO)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;
  
  

-- Carga Inicial Biblioteca -- 

-- Usuarios

INSERT INTO BIBLIOTECA.USUARIO(ID_USUARIO,NOMBRE,APELLIDOS,PASSWORD,EMAIL) VALUES (0001,'Laura', 'Gomez Gonzalez', 'gomez', 'lgomez@grupoatrium.com') ;
INSERT INTO BIBLIOTECA.USUARIO(ID_USUARIO,NOMBRE,APELLIDOS,PASSWORD,EMAIL) VALUES (0002,'Rodrigo', 'Aloso Barrios', 'alonso', 'ralonso@grupoatrium.com') ;
INSERT INTO BIBLIOTECA.USUARIO(ID_USUARIO,NOMBRE,APELLIDOS,PASSWORD,EMAIL) VALUES (0003,'Sergio', 'Pérez Valdés', 'perez', 'sperez@grupoatrium.com') ;
INSERT INTO BIBLIOTECA.USUARIO(ID_USUARIO,NOMBRE,APELLIDOS,PASSWORD,EMAIL) VALUES (0004,'Juan', 'Cuacos Martín', 'cuacos', 'jcuacos@grupoatrium.com') ;
INSERT INTO BIBLIOTECA.USUARIO(ID_USUARIO,NOMBRE,APELLIDOS,PASSWORD,EMAIL) VALUES (0005,'Maria', 'Rodríguez Saenz', 'rodriguez', 'mrodriguez@grupoatrium.com') ;
INSERT INTO BIBLIOTECA.USUARIO(ID_USUARIO,NOMBRE,APELLIDOS,PASSWORD,EMAIL) VALUES (0006,'Carmen', 'Martin Suarez', 'martin', 'cmartin@grupoatrium.com') ;


-- Elemento

INSERT INTO BIBLIOTECA.ELEMENTO(ID_ELEMENTO,TIPO,ISBN,TITULO,AUTOR,LIMITE,VOLUMENES,FECHA_PUBLI)
   VALUES(0001,'L','1111111111','Crónicas de una muerte anunciada','Grabriel García Marquez','S',5, '2006-01-23');
INSERT INTO BIBLIOTECA.ELEMENTO(ID_ELEMENTO,TIPO,ISBN,TITULO,AUTOR,LIMITE,VOLUMENES,FECHA_PUBLI)
   VALUES(0002,'L','2222222222','El dardo en la palabra','Fernando Lázaro Carreter','S',2, '2003-01-19');
INSERT INTO BIBLIOTECA.ELEMENTO(ID_ELEMENTO,TIPO,ISBN,TITULO,AUTOR,LIMITE,VOLUMENES,FECHA_PUBLI)
   VALUES(0003,'L','3333333333','La regla de tres','Antonio Gala','S',13, '2005-01-23');
INSERT INTO BIBLIOTECA.ELEMENTO(ID_ELEMENTO,TIPO,ISBN,TITULO,AUTOR,LIMITE,VOLUMENES,FECHA_PUBLI)
   VALUES(0004,'L','1231231231','Viaje a Portugal ','José Saramago','S',42, '2005-10-25');
INSERT INTO BIBLIOTECA.ELEMENTO(ID_ELEMENTO,TIPO,ISBN,TITULO,AUTOR,LIMITE,VOLUMENES,FECHA_PUBLI)
   VALUES(0005,'L','1234567890','La Celestinal ','Fernando de Rojas','S',9, '2004-01-24');
INSERT INTO BIBLIOTECA.ELEMENTO(ID_ELEMENTO,TIPO,ISBN,TITULO,AUTOR,LIMITE,VOLUMENES,FECHA_PUBLI)
   VALUES(0006,'L','9876543210','La princesa de Éboli  ','Almudena de Arteaga','S',4, '2004-01-24');
      
      
-- Copia


INSERT INTO BIBLIOTECA.COPIA(ID_ELEMENTO, NUM_COPIA, PRESTABLE)VALUES (001,01,'F');
INSERT INTO BIBLIOTECA.COPIA(ID_ELEMENTO, NUM_COPIA, PRESTABLE)VALUES (001,02,'T');
INSERT INTO BIBLIOTECA.COPIA(ID_ELEMENTO, NUM_COPIA, PRESTABLE)VALUES (001,03,'T');
INSERT INTO BIBLIOTECA.COPIA(ID_ELEMENTO, NUM_COPIA, PRESTABLE)VALUES (002,01,'F');
INSERT INTO BIBLIOTECA.COPIA(ID_ELEMENTO, NUM_COPIA, PRESTABLE)VALUES (002,02,'T');
INSERT INTO BIBLIOTECA.COPIA(ID_ELEMENTO, NUM_COPIA, PRESTABLE)VALUES (003,01,'F');
INSERT INTO BIBLIOTECA.COPIA(ID_ELEMENTO, NUM_COPIA, PRESTABLE)VALUES (004,01,'F');
INSERT INTO BIBLIOTECA.COPIA(ID_ELEMENTO, NUM_COPIA, PRESTABLE)VALUES (004,02,'T');
INSERT INTO BIBLIOTECA.COPIA(ID_ELEMENTO, NUM_COPIA, PRESTABLE)VALUES (004,03,'T');
INSERT INTO BIBLIOTECA.COPIA(ID_ELEMENTO, NUM_COPIA, PRESTABLE)VALUES (005,01,'F');
INSERT INTO BIBLIOTECA.COPIA(ID_ELEMENTO, NUM_COPIA, PRESTABLE)VALUES (005,02,'T');
INSERT INTO BIBLIOTECA.COPIA(ID_ELEMENTO, NUM_COPIA, PRESTABLE)VALUES (006,01,'F');
INSERT INTO BIBLIOTECA.COPIA(ID_ELEMENTO, NUM_COPIA, PRESTABLE)VALUES (006,02,'T');
      
  
-- EnPrestamo
INSERT INTO BIBLIOTECA.ENPRESTAMO(ID_USUARIO,ID_ELEMENTO,NUM_COPIA,NUM_PRESTAMOS,FECHA_ENTREGA)
   VALUES (1,1,2,2,'2006-01-27');
INSERT INTO BIBLIOTECA.ENPRESTAMO(ID_USUARIO,ID_ELEMENTO,NUM_COPIA,NUM_PRESTAMOS,FECHA_ENTREGA)
   VALUES (2,1,3,3,'2006-01-25'); 
INSERT INTO BIBLIOTECA.ENPRESTAMO(ID_USUARIO,ID_ELEMENTO,NUM_COPIA,NUM_PRESTAMOS,FECHA_ENTREGA)
   VALUES (2,2,2,0,'2006-01-23'); 
INSERT INTO BIBLIOTECA.ENPRESTAMO(ID_USUARIO,ID_ELEMENTO,NUM_COPIA,NUM_PRESTAMOS,FECHA_ENTREGA)
   VALUES (2,4,2,0,'2006-01-22'); 
INSERT INTO BIBLIOTECA.ENPRESTAMO(ID_USUARIO,ID_ELEMENTO,NUM_COPIA,NUM_PRESTAMOS,FECHA_ENTREGA)
   VALUES (4,4,3,0,'2006-01-24'); 
INSERT INTO BIBLIOTECA.ENPRESTAMO(ID_USUARIO,ID_ELEMENTO,NUM_COPIA,NUM_PRESTAMOS,FECHA_ENTREGA)
   VALUES (5,5,2,0,'2006-01-26'); 







--Max Tabla
INSERT INTO BIBLIOTECA.MAXTABLA(ID_TABLA,ID_CLAVE,MAXIMO)VALUES (11 ,0 ,6 );
INSERT INTO BIBLIOTECA.MAXTABLA(ID_TABLA,ID_CLAVE,MAXIMO)VALUES (12 ,0 ,6 );
INSERT INTO BIBLIOTECA.MAXTABLA(ID_TABLA,ID_CLAVE,MAXIMO)VALUES (13 ,6 ,2 );


-- Sample DDL template statements --